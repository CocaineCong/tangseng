# Tangseng åŸºäºGoè¯­è¨€çš„æœç´¢å¼•æ“

**[é¡¹ç›®è¯¦ç»†å†…å®¹åœ°å€ç‚¹å‡»è¿™é‡Œ](https://cocainecong.github.io/tangseng/#/)**

## é¡¹ç›®å¤§ä½“æ¡†æ¶&åŠŸèƒ½

1. ginä½œä¸ºhttpæ¡†æ¶ï¼Œgrpcä½œä¸ºrpcæ¡†æ¶ï¼Œetcdä½œä¸ºæœåŠ¡å‘ç°ã€‚
2. æ€»ä½“æœåŠ¡åˆ†æˆ`ç”¨æˆ·æ¨¡å—`ã€`æ”¶è—å¤¹æ¨¡å—`ã€`ç´¢å¼•å¹³å°`ã€`æœç´¢å¼•æ“(æ–‡å­—æ¨¡å—)`ã€`æœç´¢å¼•æ“(å›¾ç‰‡æ¨¡å—)`ã€‚
3. åˆ†å¸ƒå¼çˆ¬è™«çˆ¬å–æ•°æ®ï¼Œå¹¶å‘é€åˆ°kafkaé›†ç¾¤ä¸­ï¼Œå†è½åº“æ¶ˆè´¹ã€‚ (è™½ç„¶çˆ¬è™«è¿˜æ²¡å†™ï¼Œä½†ä¸å¦¨ç¢æˆ‘ç”»é¥¼...)
4. æœç´¢å¼•æ“æ¨¡å—çš„æ–‡æœ¬æœç´¢å•ç‹¬è®¾ç«‹ä½¿ç”¨boltdbå­˜å‚¨indexï¼ŒmapreduceåŠ é€Ÿç´¢å¼•æ„å»ºå¹¶ä½¿ç”¨`roaring bitmap`å­˜å‚¨ç´¢å¼•ã€‚
5. ä½¿ç”¨trie treeå®ç°è¯æ¡è”æƒ³(åé¢æ‰“ç®—åŠ ä¸Šç®—æ³•æ¨¡å‹è¾…åŠ©è¯æ¡è”æƒ³)ã€‚
6. å›¾ç‰‡æœç´¢ä½¿ç”¨ResNet50æ¥è¿›è¡Œå‘é‡åŒ–æŸ¥è¯¢ + Milvus or Faiss å‘é‡æ•°æ®åº“çš„æŸ¥è¯¢ (å¼€å§‹åšäº†... DeepLearningä¹Ÿå¤ªéš¾äº†...)ã€‚
7. æ”¯æŒå¤šè·¯å¬å›ï¼Œgoä¸­è¿›è¡Œå€’æ’ç´¢å¼•å¬å›ï¼Œpythonè¿›è¡Œå‘é‡å¬å›ã€‚é€šè¿‡grpcè°ƒç”¨è¿æ¥ï¼Œè¿›è¡Œèåˆã€‚
8. æ”¯æŒTF-IDFï¼ŒBM25ç­‰ç­‰ç®—æ³•æ’åºã€‚

![é¡¹ç›®å¤§ä½“æ¡†æ¶](docs/images/tangseng.png)

## ğŸ§‘ğŸ»â€ğŸ’» å‰ç«¯åœ°å€

all in react, but still coding

[react-tangseng](https://github.com/CocaineCong/react-tangseng)

## æœªæ¥è§„åˆ’

### æ¶æ„ç›¸å…³

- [ ] å¼•å…¥é™çº§ç†”æ–­
- [x] å¼•å…¥jaegerè¿›è¡Œå…¨é“¾è·¯è¿½è¸ª(goè¿½è¸ªåˆ°python)
- [x] å¼•å…¥prometheusè¿›è¡Œç›‘æ§
- [ ] æŠ½ç¦»daoçš„initï¼Œç”¨keyæ¥è·å–ç›¸å…³æ•°æ®åº“å®ä¾‹
- [ ] å†·çƒ­æ•°æ®åˆ†ç¦»(å‚è€ƒesçš„æ–¹æ¡ˆ,å…³é”®åœ¨äºåˆ¤æ–­å†·çƒ­çš„æ ‡å‡†,æˆ–è®¸å¯ä»¥å†™åœ¨ä¸­é—´ä»¶é‡Œé¢ï¼Ÿ)
- [ ] ç›®å‰æ¥è¯´mysqlå·²ç»è¶³å¤Ÿå­˜å‚¨æ­£æ’ç´¢å¼•ï¼Œä½†åç»­å¯èƒ½ç›´æ¥ä¸€æ­¥åˆ°ä½åˆ°OLAPï¼Œstarrockså•è¡¨äº¿çº§æ•°æ®ä¹Ÿèƒ½æ¯«ç§’æŸ¥è¯¢ï¼Œmysqlåˆ°è¿™ä¸ªçº§åˆ«æ—©å°±åˆ†åº“åˆ†è¡¨äº†..

### åŠŸèƒ½ç›¸å…³

- [x] æ„å»ºç´¢å¼•çš„æ—¶å€™å¤ªæ…¢äº†.åé¢åŠ ä¸Šå¹¶å‘ï¼Œå»ºç«‹ç´¢å¼•çš„åœ°æ–¹åŠ ä¸Šå¹¶å‘
- [ ] ç´¢å¼•å‹ç¼©ï¼Œinverted indexï¼Œä¹Ÿå°±æ˜¯å€’æ’ç´¢å¼•è¡¨ï¼Œåç»­æ”¹æˆå­˜offset,ç”¨mmap
- [x] ç›¸å…³æ€§çš„è®¡ç®—è¦è€ƒè™‘ä¸€ä¸‹ï¼ŒTFIDFï¼Œbm25
- [x] ä½¿ç”¨å‰ç¼€æ ‘å­˜å‚¨è”æƒ³ä¿¡æ¯
- [ ] å“ˆå¤«æ›¼ç¼–ç å‹ç¼©å‰ç¼€æ ‘
- [x] å»ºç´¢å¼•çš„æ—¶å€™ï¼Œä¼ æ–‡ä»¶åœ°å€æ”¹æˆä¼ æ–‡ä»¶æµ
- [ ] python å¼•å…¥ bert æ¨¡å‹è¿›è¡Œåˆ†è¯çš„æ¨èè¯å¹¶æä¾› grpc æ¥å£
- [ ] inverted å’Œ trie tree çš„å­˜å‚¨æ”¯æŒä¸€è‡´æ€§hashåˆ†ç‰‡å­˜å‚¨
- [x] è¯å‘é‡
- [x] pagerank
- [ ] åˆ†ç¦» trie tree çš„ build å’Œ recall è¿‡ç¨‹
- [x] åˆ†è¯åŠ å…¥ikåˆ†è¯å™¨
- [x] æ„å»ºç´¢å¼•å¹³å°ï¼Œè®¡ç®—å­˜å‚¨åˆ†ç¦»ï¼Œæ„å»ºç´¢å¼•ä¸å¬å›åˆ†å¼€
- [ ] å¹¶ä¸”å·®è¿ç®— (ä½è¿ç®—)
- [ ] åˆ†é¡µ
- [x] æ’åº
- [ ] çº æ­£è¾“å…¥çš„query,æ¯”å¦‚"é™†åŠ å˜´"-->"é™†å®¶å˜´"
- [x] è¾“å…¥è¿›è¡Œè¯æ¡å¯ä»¥è¿›è¡Œè”æƒ³ï¼Œæ¯”å¦‚ "ä¸œæ–¹æ˜" æç¤º--> "ä¸œæ–¹æ˜ç "
- [x] ç›®å‰æ˜¯åŸºäºå—çš„ç´¢å¼•æ–¹æ³•ï¼Œåç»­çœ‹çœ‹èƒ½ä¸èƒ½æ”¹æˆåˆ†å¸ƒå¼mapreduceæ¥æ„å»ºç´¢å¼• (6.824 lab1)
- [ ] åœ¨ä¸Šä¸€æ¡çš„åŸºç¡€ä¸Šå†åŠ ä¸ŠåŠ¨æ€ç´¢å¼•ï¼ˆè¿˜ä¸çŸ¥é“ä¸Šä¸€æ¡èƒ½ä¸èƒ½å®ç°...ï¼‰
- [x] æ”¹é€ å€’æ’ç´¢å¼•ï¼Œä½¿ç”¨ roaring bitmap å­˜å‚¨docid (å¥½éš¾)
- [ ] å®ç°TFç±»
- [x] æœç´¢å®Œä¸€ä¸ªæ¥ç€æœç´¢ï¼Œæ²¡æœ‰æ¸…é™¤ç¼“å­˜å¯¼è‡´ç»“æœæ˜¯å’Œä¸Šä¸€ä¸ªäº§ç”Ÿå¹¶é›†
- [x] æ’åºå™¨ä¼˜åŒ–
- [x] å¹¶å‘è¿›è¡Œå¤šè·¯å¬å›
- [ ] ä¸ºä»€ä¹ˆå­æ¨¡å—æ”¹åŠ¨ï¼Œæ¯”å¦‚search_engineæ¨¡å—æ”¹åŠ¨ï¼Œgatewayè¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆï¼Ÿå¤ç°æ­¥éª¤:æ”¹åŠ¨äº†protoä¹‹åéœ€è¦é‡å¯gateway
- [ ] å†™ä¸€ä¸ªshell for start programå§ï¼Œæ¯æ¬¡éƒ½æ‰‹åŠ¨å¯åŠ¨æœ‰ç‚¹éš¾å®šï¼ˆé«˜ä¼˜ï¼‰

![æ–‡æœ¬æœç´¢](docs/images/text2text.jpg)

## å¿«é€Ÿå¼€å§‹
   ç¯å¢ƒå¯åŠ¨ï¼

   ```shell
   make env-up
   ```

å°å°æ•°æ®é›†å°±åœ¨ `source_data/movies_data.csv` 

### Python å¯åŠ¨!

1. ç¡®ä¿ç”µè„‘å·²ç»å®‰è£…äº†python,ç¡®ä¿python version>=3.9,æˆ‘çš„ç‰ˆæœ¬æ˜¯3.10.2

    ```shell
    python --version
    ```

2. å®‰è£…venvç¯å¢ƒ

    ```shell
    python -m venv venv
    ```

3. æ¿€æ´» venv python ç¯å¢ƒ
    
   macos:

    ```shell
    source venv/bin/activate
    ```

    windows:

    ç­‰æˆ‘æ¸…å®ŒCç›˜å†å…¼å®¹ä¸€ä¸‹...è¿˜æ²¡åœ¨winä¸Šè·‘è¿‡...

4. å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–

   ```python
   pip install -r requirements.txt
   ```
5. å¯åŠ¨ä¸»ç¨‹åº
   ```python
   sh python-start.sh
   ```
6. å¯åŠ¨è„šæœ¬æ„å»ºç´¢å¼•
    ```python
    make python-consume
    ```

### Golang å¯åŠ¨! 

golang version >= go 1.16 å³å¯ã€‚æˆ‘çš„goç‰ˆæœ¬æ˜¯ 1.18.6

1. ä¸‹è½½ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…

    ```shell
    go mod tidy
    ```

2. ç›®å½•ä¸‹æ‰§è¡Œ

    ```shell
    make run-xxx(user,favortie ...)
    # e.g:
    # make run-user
    # make run-favorite
    # å…·ä½“çœ‹makefileæ–‡ä»¶
    ```

## å¼€æºè´¡çŒ®

åœ¨æäº¤prä¹‹å‰ï¼Œè¯·æŸ¥çœ‹ `CONTRIBUTING_CN.md`